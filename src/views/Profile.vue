<template>
  <BaseProfile>
    <template v-slot:profile-img>
      <img
        class="user-icon"
        alt="user-icon"
        src="../assets/user-icon-placeholder.svg"
      />
    </template>

    <template v-slot:msg-bubble>
      <div v-if="profileMessage" class="msg-bubble">{{ profileMessage }}</div>
      <div v-else class="msg-bubble">Message Bubble Here</div>
    </template>

    <template v-slot:user-title>
      <span class="wishlist-header__owner">{{ firstName }}'s Wishlist</span>
      <span class="wishlist-header__count">1 / 4 Bought</span>
    </template>

    <template v-slot:user-wishlist>
      <div class="user-wishlist">
        <WishlistItemSmall
          v-for="wishlistItem in wishlistItems"
          :key="wishlistItem.key"
          :name="wishlistItem.displayName || wishlistItem.name"
          :purchased="wishlistItem.purchased"
        />
      </div>
    </template>
  </BaseProfile>
</template>

<script>
import BaseProfile from '@/components/BaseProfile.vue'
import WishlistItemSmall from '@/components/WishlistItemSmall.vue'
import EventService from '@/services/EventService.js'

export default {
  name: 'Profile',
  components: {
    BaseProfile,
    WishlistItemSmall
  },
  props: ['userId', 'firstName', 'shortName', 'lastName', 'profileMessage'],
  data() {
    return {
      event: null,
      wishlistItems: []
    }
  },
  created() {
    // fetch data for single id
    EventService.getUserProducts(this.userId)
      .then(res => {
        this.wishlistItems = [...res.data]
        console.log('products:', [...res.data])
      })
      .catch(error => {
        console.log(error)
      })
  }
}
</script>

<style scoped lang="scss">
.msg-bubble {
  background: $yellow;
  padding: 0.5rem;
  margin-bottom: 1rem;
  border: 1px solid #39495c;
  border-radius: 0.75rem;
  font-size: 14px;
}

.wishlist-header__owner {
  font-size: 28px;
}

.wishlist-header__count {
  float: right;
  font-size: 14px;
}
</style>
